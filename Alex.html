<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alex Preview with Typing and Sound</title>
  <style>
    * { box-sizing: border-box; }
    body { background: #f0f0f0; padding: 20px; margin: 0; }
    .card { background: #fff; padding: 24px; border-radius: 12px;
              box-shadow: 0 4px 10px rgba(0,0,0,0.2); max-width: 600px; width: 100%; margin: 0 auto; }
    #avatar { width: 100px; height: 100px; border-radius: 50%; display: block; margin: 0 auto 16px; }
    #textContent { font-size: 16px; line-height: 1.4; text-align: center; white-space: pre-wrap; min-height: 8em; }
    .cursor { display: inline-block; vertical-align: bottom; animation: blink 1s step-start 0s infinite; }
    @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    #watchBtn { display: none; margin: 20px auto 0; padding: 10px 20px; background: #0084ff; color: #fff;
                border: none; border-radius: 20px; font-size: 14px; cursor: pointer; }
    @media (max-width: 480px) {
      .card { padding: 16px; }
      #avatar { width: 80px; height: 80px; margin-bottom: 12px; }
      #textContent { font-size: 14px; }
      #watchBtn { padding: 8px 16px; font-size: 12px; }
    }
  </style>
</head>
<body>
  <div class="card">
    <img id="avatar" src="https://api.dicebear.com/7.x/notionists-neutral/svg?seed=alex" alt="Alex avatar">
    <p><span id="textContent"></span><span class="cursor">|</span></p>
    <button id="watchBtn" type="button">Watch Interaction</button>
  </div>

  <!-- 尝试自动播放的打字音效 -->
  <audio id="typingSound" preload="auto" autoplay playsinline>
    <source src="https://actions.google.com/sounds/v1/office/typing_on_keyboard.ogg" type="audio/ogg">
    <source src="https://actions.google.com/sounds/v1/office/keyboard_typing_fast.ogg" type="audio/ogg">
    <!-- 如果需要 MP3 备用，请替换下面链接 -->
    <source src="https://your-cdn.com/sounds/typing_on_keyboard.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    const part1 = "Hi friend, I’m Alex – an AI powered assistant that works like a real human being!\nFeel free to ask me questions, chit chat, and work together with me!\nI can understand your thoughts, feelings, and think like you.";
    const part2 = "READY TO TRY?";
    const part3 = "Hold on! Let me show you my conversation with someone first.";

    const textEl = document.getElementById('textContent');
    const watchBtn = document.getElementById('watchBtn');
    const audioEl = document.getElementById('typingSound');

    const rangeFront = [20, 60];
    const rangeReady = [150, 300];
    const rangeAfter = [30, 70];

    function randomDelay([min, max]) {
      return Math.random() * (max - min) + min;
    }

    function playSound() {
      audioEl.currentTime = 0;
      audioEl.play().catch(() => {
        // 如果播放被阻止，静默忽略
      });
    }

    function typeText(text, range, callback) {
      let i = 0;
      (function nextChar() {
        if (i < text.length) {
          textEl.textContent += text.charAt(i);
          playSound();
          i++;
          setTimeout(nextChar, randomDelay(range));
        } else if (callback) {
          callback();
        }
      })();
    }

    function deleteChars(el, count, range, callback) {
      let remaining = count;
      (function nextDel() {
        if (remaining > 0) {
          el.textContent = el.textContent.slice(0, -1);
          playSound();
          remaining--;
          setTimeout(nextDel, randomDelay(range));
        } else if (callback) {
          callback();
        }
      })();
    }

    function startTypingSequence() {
      typeText(part1, rangeFront, () => {
        textEl.textContent += '\n';
        const boldEl = document.createElement('strong');
        textEl.appendChild(boldEl);
        textEl.appendChild(document.createElement('br'));

        (function typeReady(idx) {
          if (idx < part2.length) {
            boldEl.textContent += part2.charAt(idx);
            playSound();
            setTimeout(() => typeReady(idx + 1), randomDelay(rangeReady));
          } else {
            setTimeout(() => {
              deleteChars(boldEl, part2.length, rangeReady, () => {
                const br = boldEl.nextSibling;
                boldEl.remove();
                if (br && br.tagName === 'BR') br.remove();
                typeText(part3, rangeAfter, () => {
                  watchBtn.style.display = 'block';
                });
              });
            }, 500);
          }
        })(0);
      });
    }

    // 页面一加载就尝试自动播放音效并启动打字动画
    window.addEventListener('load', () => {
      audioEl.play().catch(() => {});
      startTypingSequence();
    });

    watchBtn.addEventListener('click', () => alert('Here is a sample conversation!'));
  </script>
</body>
</html>


