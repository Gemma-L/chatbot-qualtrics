<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alex Preview – Interactive Typing Animation</title>
  <style>
    /* Background animation */
    @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    body {
      margin: 0; height: 100vh;
      background: linear-gradient(-45deg,#f0f0f0,#e2e2e2,#f5f5f5,#e8e8e8);
      background-size: 400% 400%; animation: gradientBG 20s ease infinite;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Segoe UI', Tahoma, sans-serif;
    }
    .card {
      background: #fff; padding: 24px; border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1); max-width: 600px; width: 90%;
      transition: transform .3s ease;
    }
    .card.typing { transform: scale(1.02); box-shadow: 0 12px 24px rgba(0,0,0,0.15); }
    /* Avatar entrance */
    @keyframes slideIn { 0% { transform: translateX(-120%) scale(0.5);} 60% { transform: translateX(20px) scale(1.1);} 80% { transform: translateX(-10px) scale(0.95);} 100% { transform: translateX(0) scale(1);} }
    @keyframes breathe { 0%,100% { transform: scale(1);} 50% { transform: scale(1.05);} }
    @keyframes blink { 0%,2%,4%,100% { transform: translate(-50%, -100%);} 1%,3% { transform: translate(-50%, 0);} }
    @keyframes blink-btm { 0%,2%,4%,100% { transform: translate(-50%, 100%);} 1%,3% { transform: translate(-50%, 0);} }

    .avatar-container {
      position: relative; width: 100px; height: 100px; margin: 0 auto 16px;
      animation: slideIn .8s ease-out .2s both;
      overflow: visible;
    }
    #avatar {
      width: 100%; height: 100%; border-radius: 50%; display: block;
      animation: breathe 4s ease-in-out infinite;
    }
    /* Eyelids for blinking */
    .lid-top, .lid-btm {
      position: absolute; left: 50%; width: 100%; height: 50%; background: #fff;
      transform: translate(-50%, -100%); transform-origin: bottom center;
      /* Blink only over first 3s */
      animation-duration: 3s; animation-timing-function: ease-in-out;
      animation-fill-mode: forwards;
    }
    .lid-top { top: 0; animation-name: blink; animation-delay: .5s; animation-iteration-count: 1; }
    .lid-btm { bottom: 0; transform: translate(-50%, 100%); transform-origin: top center;
      animation-name: blink-btm; animation-delay: .5s; animation-iteration-count: 1;
    }
    /* Tongue initially hidden */
    .tongue {
      position: absolute; bottom: -10px; left: 50%; width: 30px; height: 20px;
      background: #ff6b6b; border-radius: 0 0 15px 15px;
      transform: translateX(-50%) scaleY(0);
      transform-origin: top center; transition: transform .3s ease-out;
    }
    .tongue.show {
      transform: translateX(-50%) scaleY(1);
    }

    #textContent { font-size: 16px; line-height: 1.6; white-space: pre-wrap; min-height: 10em; color: #333; }
    .cursor { display: inline-block; animation: blink-c 1s step-start infinite; font-weight: bold; }
    @keyframes blink-c { 50% { opacity: 0; } }
    #watchBtn { display: none; margin: 20px auto 0; padding: 10px 20px; background: #0084ff; color: #fff; border: none; border-radius: 20px; font-size: 14px; cursor: pointer; transition: background .3s; }
    #watchBtn:hover { background: #006fd4; }
    @media (max-width: 480px) { .card { padding: 16px; } .avatar-container { width: 80px; height: 80px; margin-bottom: 12px; } #textContent { font-size: 14px; } #watchBtn { padding: 8px 16px; font-size: 12px; } }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="avatar-container">
      <img id="avatar" src="https://api.dicebear.com/7.x/notionists-neutral/svg?seed=alex" alt="Alex avatar">
      <div class="lid-top"></div>
      <div class="lid-btm"></div>
      <div class="tongue" id="tongue"></div>
    </div>
    <p><span id="textContent"></span><span class="cursor">|</span></p>
    <button id="watchBtn" type="button">Watch Interaction</button>
  </div>
  <audio id="typingSound" preload="auto">
    <source src="https://actions.google.com/sounds/v1/office/typing_on_keyboard.ogg" type="audio/ogg">
    <source src="https://actions.google.com/sounds/v1/office/keyboard_typing_fast.ogg" type="audio/ogg">
  </audio>
  <script>
    const card = document.getElementById('card');
    const textEl = document.getElementById('textContent');
    const watchBtn = document.getElementById('watchBtn');
    const audioEl = document.getElementById('typingSound');
    const tongue = document.getElementById('tongue');
    const parts = [
      "Hi friend, I’m Alex – an AI powered assistant that works like a real human being!",
      "Feel free to ask me questions, chit chat, and work together with me!",
      "I can understand your thoughts, feelings, and think like you.",
      "READY TO TRY?",
      "Hold on! Let me show you my conversation with someone first."
    ];
    const ranges = [[20,60],[20,60],[20,60],[150,300],[30,70]];

    function randomDelay([min,max]) { return Math.random() * (max - min) + min; }
    function playSound() { audioEl.currentTime = 0; audioEl.play().catch(() => {}); }
    function isPauseChar(ch) { return /[\.，,!?]/.test(ch); }

    function typeSegment(idx, cb) {
      const text = parts[idx], range = ranges[idx]; let i = 0;
      card.classList.add('typing');
      (function next() {
        if (i < text.length) {
          textEl.textContent += text.charAt(i);
          playSound();
          let delay = randomDelay(range) + (isPauseChar(text.charAt(i)) ? randomDelay([200, 500]) : 0);
          i++;
          setTimeout(next, delay);
        } else {
          card.classList.remove('typing');
          textEl.textContent += '\n';
          cb();
        }
      })();
    }

    function startTyping() {
      let idx = 0;
      (function next() {
        if (idx < parts.length) {
          typeSegment(idx, () => { idx++; next(); });
        } else {
          watchBtn.style.display = 'block';
          // Show tongue at end
          setTimeout(() => { tongue.classList.add('show'); }, 300);
        }
      })();
    }

    function unlockAudio() {
      audioEl.play().catch(() => {});
      audioEl.pause();
      document.body.removeEventListener('click', unlockAudio);
      startTyping();
    }
    document.body.addEventListener('click', unlockAudio);
    watchBtn.addEventListener('click', () => alert('Here is a sample conversation!'));
  </script>
</body>
</html>
