<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Alex Preview – Enhanced Entrance & Blink</title>
  <style>
    /* Background */
    @keyframes gradientBG { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
    body { margin:0; height:100vh;
      background: linear-gradient(-45deg,#f0f0f0,#e2e2e2,#f5f5f5,#e8e8e8);
      background-size:400% 400%; animation:gradientBG 20s ease infinite;
      display:flex; align-items:center; justify-content:center; font-family:'Segoe UI',Tahoma,sans-serif;
    }
    .card { background:#fff; padding:24px; border-radius:12px;
      box-shadow:0 8px 20px rgba(0,0,0,0.1); max-width:600px; width:90%; transition:transform .3s ease;
    }
    .card.typing { transform:scale(1.02); box-shadow:0 12px 24px rgba(0,0,0,0.15); }

    /* Entrance bounce twice */
    @keyframes bounceInX {
      0% { transform: translateX(-120%) scale(0.5); }
      50% { transform: translateX(15px) scale(1.1); }
      65% { transform: translateX(-10px) scale(0.95); }
      80% { transform: translateX(8px) scale(1.03); }
      100% { transform: translateX(0) scale(1); }
    }
    /* Fast blink keyframes */
    @keyframes blinkFast { 0%,20%,40%,100% { transform: translate(-50%,-100%);} 10%,30% { transform: translate(-50%,0);} }
    @keyframes blinkFastBtm { 0%,20%,40%,100% { transform: translate(-50%,100%);} 10%,30% { transform: translate(-50%,0);} }
    /* Shake */
    @keyframes shake { 0%,100% { transform: translate(0); } 10% { transform: translate(-5px,0);} 20% { transform: translate(5px,0);} 30% { transform: translate(-5px,0);} 40% { transform: translate(5px,0);} 50% { transform: translate(-2px,0);} 60% { transform: translate(2px,0);} 70% { transform: translate(-2px,0);} 80% { transform: translate(2px,0);} 90% { transform: translate(0); } }
    .avatar-container {
      position:relative; width:100px; height:100px; margin:0 auto 16px;
      animation:bounceInX .8s ease-out both;
    }
    #avatar { width:100%; height:100%; border-radius:50%; display:block; }
    /* Eyelids start hidden */
    .lid-top, .lid-btm { position:absolute; left:50%; width:100%; height:50%; background:#fff;
      transform:translate(-50%,-100%); transform-origin:bottom center;
    }
    .lid-btm { bottom:0; transform:translate(-50%,100%); transform-origin:top center; }
    /* Blink+shake class */
    .blinkShake .lid-top { animation:blinkFast 1s ease-in-out forwards; }
    .blinkShake .lid-btm { animation:blinkFastBtm 1s ease-in-out forwards; }
    .blinkShake { animation:shake 1s ease-in-out both; }
    /* Tongue hidden, show later */
    .tongue { position:absolute; bottom:-10px; left:50%; width:30px; height:20px;
      background:#ff6b6b; border-radius:0 0 15px 15px;
      transform:translateX(-50%) scaleY(0); transform-origin:top center;
      transition:transform .3s ease-out;
    }
    .tongue.show { transform:translateX(-50%) scaleY(1); }

    #textContent { font-size:16px; line-height:1.6; white-space:pre-wrap; min-height:10em; color:#333; }
    .cursor { display:inline-block; animation:blink-c 1s step-start infinite; font-weight:bold; }
    @keyframes blink-c { 50% { opacity:0; } }
    #watchBtn { display:none; margin:20px auto 0; padding:10px 20px; background:#0084ff; color:#fff; border:none; border-radius:20px; font-size:14px; cursor:pointer; transition:background .3s; }
    #watchBtn:hover { background:#006fd4; }
    @media(max-width:480px){.card{padding:16px;} .avatar-container{width:80px;height:80px;margin-bottom:12px;} #textContent{font-size:14px;} #watchBtn{padding:8px 16px;font-size:12px;}}
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="avatar-container" id="avatarContainer">
      <img id="avatar" src="https://api.dicebear.com/7.x/notionists-neutral/svg?seed=alex" alt="Alex avatar">
      <div class="lid-top"></div>
      <div class="lid-btm"></div>
      <div class="tongue" id="tongue"></div>
    </div>
    <p><span id="textContent"></span><span class="cursor">|</span></p>
    <button id="watchBtn" type="button">Watch Interaction</button>
  </div>

  <audio id="typingSound" preload="auto">
    <source src="https://actions.google.com/sounds/v1/office/typing_on_keyboard.ogg" type="audio/ogg">
    <source src="https://actions.google.com/sounds/v1/office/keyboard_typing_fast.ogg" type="audio/ogg">
  </audio>
  <script>
    const avatarContainer = document.getElementById('avatarContainer');
    const lidTop = document.querySelector('.lid-top');
    const lidBtm = document.querySelector('.lid-btm');
    const tongue = document.getElementById('tongue');
    const textEl = document.getElementById('textContent');
    const watchBtn = document.getElementById('watchBtn');
    const audioEl = document.getElementById('typingSound');
    const parts = [
      "Hi friend, I’m Alex – an AI powered assistant that works like a real human being!",
      "Feel free to ask me questions, chit chat, and work together with me!",
      "I can understand your thoughts, feelings, and think like you.",
      "READY TO TRY?",
      "Hold on! Let me show you my conversation with someone first."
    ];
    const ranges = [[20,60],[20,60],[20,60],[150,300],[30,70]];
    function randomDelay([min,max]){return Math.random()*(max-min)+min;}
    function playSound(){audioEl.currentTime=0;audioEl.play().catch(()=>{});}
    function isPauseChar(ch){return /[\.，,!?]/.test(ch);}  
    function typeSegment(idx,cb){ let i=0; document.getElementById('card').classList.add('typing');
      (function next(){ if(i<parts[idx].length){ textEl.textContent+=parts[idx].charAt(i); playSound(); let delay=randomDelay(ranges[idx])+(isPauseChar(parts[idx].charAt(i))?randomDelay([200,500]):0); i++; setTimeout(next,delay);} else{document.getElementById('card').classList.remove('typing'); textEl.textContent+='\n'; cb();}})(); }
    function startTyping(){ let idx=0; (function next(){ if(idx<parts.length){ typeSegment(idx,()=>{idx++;next();}); } else{ watchBtn.style.display='block'; tongue.classList.add('show'); }} )(); }
    function unlockAudio(){audioEl.play().catch(()=>{});audioEl.pause(); document.body.removeEventListener('click',unlockAudio);}    
    // After bounce animation ends, trigger blink+shake then start typing
    avatarContainer.addEventListener('animationend', function onBounce(e){ if(e.animationName==='bounceInX'){ avatarContainer.removeEventListener('animationend', onBounce); avatarContainer.classList.add('blinkShake'); // listen for blink end
        avatarContainer.addEventListener('animationend', function onBlink(ev){ if(ev.animationName==='blinkFast'){ avatarContainer.removeEventListener('animationend', onBlink); startTyping(); } }); } });
    document.body.addEventListener('click', unlockAudio);
    watchBtn.addEventListener('click',() => alert('Here is a sample conversation!'));
  </script>
</body>
</html>

